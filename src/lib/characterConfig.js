// characterConfig.js - основной конфигурационный файл

// Конфигурация частей персонажа
const PARTS_CONFIG = {
  // Уши
  ears: {
    title: "Уши",
    enabled: true,
    variants: {
      'торчком обычные': {
        label: "Торчком обычные",
        layers: [
          'Уши/торчком обычные/лайн',
          'Уши/торчком обычные/свет',
          'Уши/торчком обычные/тень',
          'Уши/торчком обычные/[красить]'
        ]
      },
      'торчком пушистые': {
        label: "Торчком пушистые",
        layers: [
          'Уши/торчком пушистые/лайн',
          'Уши/торчком пушистые/свет',
          'Уши/торчком пушистые/тень',
          'Уши/торчком пушистые/[красить]'
        ]
      },
      'длинные': {
        label: "Длинные",
        layers: [
          'Уши/длинные/лайн',
          'Уши/длинные/свет',
          'Уши/длинные/тень',
          'Уши/длинные/[красить]'
        ]
      },
      'повисшие': {
        label: "Висячие",
        layers: [
          'Уши/повисшие/лайн',
          'Уши/повисшие/свет',
          'Уши/повисшие/тень',
          'Уши/повисшие/[красить]'
        ]
      }
    }
  },

  // Глаза
  eyes: {
    title: "Глаза",
    enabled: true,
    variants: {
      'лисьи': {
        label: "Лисьи",
        layers: [
          'Глаза/лисьи/блики',
          'Глаза/лисьи/лайн',
          'Глаза/лисьи/свет',
          'Глаза/лисьи/тень',
          'Глаза/лисьи/[красить]'
        ]
      },
      'обычные': {
        label: "Обычные",
        layers: [
          'Глаза/обычные/блики',
          'Глаза/обычные/свет',
          'Глаза/обычные/тень',
          'Глаза/обычные/[красить]',
          'Глаза/обычные/[белок красить]'
        ],
        subtypes: {
          'с ресницами': ['Глаза/обычные/с ресницами'],
          'без ресниц': ['Глаза/обычные/без ресниц']
        }
      }
    }
  },

  // Щёки
  cheeks: {
    title: "Щёки",
    enabled: true,
    variants: {
      'пушистые': {
        label: "Пушистые",
        layers: [
          'Щёки/пушистые/лайн',
          'Щёки/пушистые/тень',
          'Щёки/пушистые/свет',
          'Щёки/пушистые/[красить]'
        ]
      },
      'нет': {
        label: "Выключены",
        layers: []
      }
    }
  },

  // Голова
  head: {
    title: "Голова",
    enabled: true,
    isSingleVariant: true,
    layers: [
      'Голова/лайн',
      'Голова/свет',
      'Голова/тень',
      'Голова/[красить]'
    ]
  },

  // Грива
  mane: {
    title: "Грива",
    enabled: true,
    variants: {
      'пышная': {
        label: "Пышная",
        layers: [
          'Грудь Шея Грива/пышная/лайн',
          'Грудь Шея Грива/пышная/свет',
          'Грудь Шея Грива/пышная/тень',
          'Грудь Шея Грива/пышная/[красить]'
        ]
      },
      'обычная': {
        label: "Обычная",
        layers: [
          'Грудь Шея Грива/обычная/лайн',
          'Грудь Шея Грива/обычная/свет',
          'Грудь Шея Грива/обычная/тень',
          'Грудь Шея Грива/обычная/[красить]'
        ]
      },
      'короткошерстная': {
        label: "Короткошерстная",
        layers: [
          'Грудь Шея Грива/короткошерстная/лайн',
          'Грудь Шея Грива/короткошерстная/свет',
          'Грудь Шея Грива/короткошерстная/тень',
          'Грудь Шея Грива/короткошерстная/[красить]'
        ]
      }
    }
  },

  // Тело
  body: {
    title: "Тело",
    enabled: true,
    variants: {
      'v1': {
        label: "Обычное",
        layers: [
          'Тело/v1/лайн',
          'Тело/v1/тень',
          'Тело/v1/свет',
          'Тело/v1/свет2',
          'Тело/v1/[красить]'
        ]
      },
      'v2': {
        label: "Короткошерстное",
        layers: [
          'Тело/v2/лайн',
          'Тело/v2/тень',
          'Тело/v2/свет',
          'Тело/v2/свет2',
          'Тело/v2/[красить]'
        ]
      },
      'v3': {
        label: "Пушистое",
        layers: [
          'Тело/v3/лайн',
          'Тело/v3/тень',
          'Тело/v3/свет',
          'Тело/v3/свет2',
          'Тело/v3/[красить]'
        ]
      }
    }
  },

  // Хвост
  tail: {
    title: "Хвост",
    enabled: true,
    variants: {
      'длинный тонкий': {
        label: "Длинный тонкий",
        layers: [
          'Хвосты/длинный тонкий/лайн',
          'Хвосты/длинный тонкий/свет',
          'Хвосты/длинный тонкий/тень',
          'Хвосты/длинный тонкий/[красить]'
        ]
      },
      'куцый': {
        label: "Куцый",
        layers: [
          'Хвосты/куцый/лайн',
          'Хвосты/куцый/свет',
          'Хвосты/куцый/тень',
          'Хвосты/куцый/[красить]'
        ]
      },
      'обычный': {
        label: "Обычный",
        layers: [
          'Хвосты/обычный/лайн',
          'Хвосты/обычный/свет',
          'Хвосты/обычный/тень',
          'Хвосты/обычный/[красить]'
        ]
      },
      'пышный': {
        label: "Пышный",
        layers: [
          'Хвосты/пышный/лайн',
          'Хвосты/пышный/свет',
          'Хвосты/пышный/тень',
          'Хвосты/пышный/[красить]'
        ]
      }
    }
  }
};

// Конфигурация цветов
const COLORS_CONFIG = {
  main: {
    default: '#f1ece4',
    affects: ['ears', 'cheeks', 'head', 'mane', 'body', 'tail']
  },
  eyesWhite: {
    default: '#ffffff',
    layerMarker: '[белок красить]'
  }
};

// Стандартный персонаж
const DEFAULT_CHARACTER = {
  ears: 'торчком обычные',
  eyes: {
    type: 'обычные',
    subtype: 'с ресницами'
  },
  cheeks: 'пушистые',
  mane: 'обычная',
  body: 'v1',
  tail: 'обычный',
  colors: {
    main: '#f1ece4',
    eyesWhite: '#ffffff'
  },
  partColors: {
    ears: '#f1ece4',
    cheeks: '#f1ece4',
    mane: '#f1ece4',
    body: '#f1ece4',
    tail: '#f1ece4',
    head: '#f1ece4'
  }
};

// Проверка конфигурации
function validateConfig(config) {
  if (!config || typeof config !== 'object') {
    throw new Error('Invalid configuration: config must be an object');
  }
  
  // Проверяем наличие обязательных полей
  const requiredParts = ['ears', 'eyes', 'cheeks', 'head', 'mane', 'body', 'tail'];
  for (const part of requiredParts) {
    if (!config[part]) {
      throw new Error(`Missing configuration for part: ${part}`);
    }
  }
  
  return true;
}

// Основной экспорт
const CHARACTER_CONFIG = {
  parts: PARTS_CONFIG,
  colors: COLORS_CONFIG
};

// Проверяем конфигурацию перед экспортом
try {
  validateConfig(PARTS_CONFIG);
  console.log('Character configuration validated successfully');
} catch (error) {
  console.error('Configuration validation failed:', error);
  throw error;
}

export { CHARACTER_CONFIG, DEFAULT_CHARACTER };
